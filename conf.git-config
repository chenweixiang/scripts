################################################################################
## User & E-mail
################################################################################

# Set user name and email address
git config --global user.name "Weixiang Chen"
git config --global user.email "weixiang.chen@outlook.com"


################################################################################
## Misc
################################################################################

# Enable auto-correct function for mistype commands
#git config --global help.autocorrect 1

# Abbreviate commit hashes to 12 characters
git config --global core.abbrev 12

# Take care of file mode change
git config --global core.filemode true


################################################################################
## Variables
################################################################################

#-------------------------------------------------------------------------------
# Use vim as editor
#-------------------------------------------------------------------------------
git config --global core.editor vim

#-------------------------------------------------------------------------------
# Set highlight for terminal
#-------------------------------------------------------------------------------
git config --global color.ui true
git config --global color.status auto
git config --global color.branch auto
git config --global color.showbranch auto
git config --global color.diff auto
git config --global color.grep auto
git config --global color.interactive auto

#-------------------------------------------------------------------------------
# Specify how differences in submodules are shown.
# Same as "git diff --submodule=diff <tag-or-commit-ids>"
#-------------------------------------------------------------------------------
git config --global diff.submodule diff

#-------------------------------------------------------------------------------
# Specify how to reconcile divergent branches.
# Same as "git pull --ff-only"
#-------------------------------------------------------------------------------
git config --global pull.ff only


################################################################################
## Aliases
################################################################################

#-------------------------------------------------------------------------------
# Remove section "alias" from ~/.gitconfig to clean legacy alias
#-------------------------------------------------------------------------------
git config --global --remove-section alias

#-------------------------------------------------------------------------------
# Show git help.
# Usage:  git hlp
#-------------------------------------------------------------------------------
git config --global alias.hlp help

#-------------------------------------------------------------------------------
# List git config.
# Usage:  git conf
#-------------------------------------------------------------------------------
git config --global alias.conf "config -l"

#-------------------------------------------------------------------------------
# List local or remote branches.
# Usage:  git br
#         git br -r
#         git br -a
#-------------------------------------------------------------------------------
git config --global alias.br branch

#-------------------------------------------------------------------------------
# List remote branches.
# Usage:  git brr
#-------------------------------------------------------------------------------
git config --global alias.brr "branch -r"

#-------------------------------------------------------------------------------
# List local and remote branches.
# Usage:  git bra
#-------------------------------------------------------------------------------
git config --global alias.bra "branch -a"

#-------------------------------------------------------------------------------
# Remove specified branches.
# Usage:  git brd
#-------------------------------------------------------------------------------
git config --global alias.brd "branch -D"

#-------------------------------------------------------------------------------
# Checkout to specific branch, tag or commit.
# Usage:  git co <branch>
#         git co <tag-or-commit-id>
#-------------------------------------------------------------------------------
git config --global alias.co checkout

#-------------------------------------------------------------------------------
# Create a branch and checkout to it.
# Usage:  git cb <new-branch> [<tag-or-commit-id>]
#-------------------------------------------------------------------------------
git config --global alias.cb "checkout -b"

#-------------------------------------------------------------------------------
# Checkout to master branch.
# Usage:  git cm
#-------------------------------------------------------------------------------
git config --global alias.cm "checkout master"

#-------------------------------------------------------------------------------
# Checkin changes.
# Usage:  git ci [--amend]
#-------------------------------------------------------------------------------
git config --global alias.ci commit

#-------------------------------------------------------------------------------
# Checkin changes.
# Usage:  git cia
#-------------------------------------------------------------------------------
git config --global alias.cia "commit --amend"

#-------------------------------------------------------------------------------
# Reset changes.
# Usage:  git rst
#-------------------------------------------------------------------------------
git config --global alias.rst "reset --hard"

#-------------------------------------------------------------------------------
# Reset to HEAD.
# Usage:  git rsth
#-------------------------------------------------------------------------------
git config --global alias.rsth "reset --hard HEAD"

#-------------------------------------------------------------------------------
# Cherry-pick changes.
# Usage:  git cp
#-------------------------------------------------------------------------------
git config --global alias.cp cherry-pick

#-------------------------------------------------------------------------------
# Abort the ongoing cherry-pick.
# Usage:  git cpa
#-------------------------------------------------------------------------------
git config --global alias.cpa "cherry-pick --abort"

#-------------------------------------------------------------------------------
# Continue the ongoing cherry-pick after conflict solved.
# Usage:  git cpc
#-------------------------------------------------------------------------------
git config --global alias.cpc "cherry-pick --continue"

#-------------------------------------------------------------------------------
# Rebase changes.
# Usage:  git rb
#-------------------------------------------------------------------------------
git config --global alias.rb rebase

#-------------------------------------------------------------------------------
# Rebase changes to master.
# Usage:  git rbm
#-------------------------------------------------------------------------------
git config --global alias.rbm "rebase master"

#-------------------------------------------------------------------------------
# Rebase changes.
# Usage:  git rbi
#-------------------------------------------------------------------------------
git config --global alias.rbi "rebase -i"

#-------------------------------------------------------------------------------
# Abort the ongoing rebase.
# Usage:  git rba
#-------------------------------------------------------------------------------
git config --global alias.rba "rebase --abort"

#-------------------------------------------------------------------------------
# Continue the ongoing rebase after conflict solved.
# Usage:  git rbc
#-------------------------------------------------------------------------------
git config --global alias.rbc "rebase --continue"

#-------------------------------------------------------------------------------
# Revert changes.
# Usage:  git rvt
#-------------------------------------------------------------------------------
git config --global alias.rvt revert

#-------------------------------------------------------------------------------
# Blame changes.
# Usage:  git blm
#-------------------------------------------------------------------------------
git config --global alias.blm blame

#-------------------------------------------------------------------------------
# Show repo status.
# Usage:  git st
#-------------------------------------------------------------------------------
git config --global alias.st status

#-------------------------------------------------------------------------------
# Use graphical tool to merge commit, see below configurations.
# Usage:  git mt
#-------------------------------------------------------------------------------
git config --global alias.mt mergetool

#-------------------------------------------------------------------------------
# Give an object a human readable name based on an available ref.
# Usage:  git desc
#-------------------------------------------------------------------------------
git config --global alias.desc describe

#-------------------------------------------------------------------------------
# List reflog.
# Usage:  git rlog
#-------------------------------------------------------------------------------
git config --global alias.rlog reflog

#-------------------------------------------------------------------------------
# Log commit History with Graphical.
# Usage:  git lhg [-<numberOfRecords>]
#         git lhg [-<numberOfRecords>] [<tag-or-commit-id>]
#         git lhg [-<numberOfRecords>] [<tag-or-commit-id>..<tag-or-commit-id>]
#         git lhg [-<numberOfRecords>] [<tag-or-commit-id>~..<tag-or-commit-id>]
#
#         git lhg10
#         git lhg20
#         git lhg30
#-------------------------------------------------------------------------------
git config --global alias.lhg   "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --graph --topo-order --decorate"

git config --global alias.lhg10 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --graph --topo-order --decorate -10"
git config --global alias.lhg20 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --graph --topo-order --decorate -20"
git config --global alias.lhg30 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --graph --topo-order --decorate -30"

#-------------------------------------------------------------------------------
# Log commit History of first parent.
# Usage:  git lh [-<numberOfRecords>]
#         git lh [-<numberOfRecords>] [<tag-or-commit-id>]
#         git lh [-<numberOfRecords>] [<tag-or-commit-id>..<tag-or-commit-id>]
#         git lh [-<numberOfRecords>] [<tag-or-commit-id>~..<tag-or-commit-id>]
#
#         git lh10
#         git lh20
#         git lh30
#-------------------------------------------------------------------------------
git config --global alias.lh   "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --topo-order --decorate --first-parent"

git config --global alias.lh10 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --topo-order --decorate --first-parent -10"
git config --global alias.lh20 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --topo-order --decorate --first-parent -20"
git config --global alias.lh30 "log --date=short --pretty=format:'%Cgreen%h %Cred%ad %Creset%s %Cred%d' --topo-order --decorate --first-parent -30"

#-------------------------------------------------------------------------------
# Log commit History of first parent with more Details.
# Usage:  git lhd [-<numberOfRecords>]
#         git lhd [-<numberOfRecords>] [<tag-or-commit-id>]
#         git lhd [-<numberOfRecords>] [<tag-or-commit-id>..<tag-or-commit-id>]
#         git lhd [-<numberOfRecords>] [<tag-or-commit-id>~..<tag-or-commit-id>]
#-------------------------------------------------------------------------------
git config --global alias.lhd   "log --numstat -c --decorate --pretty=fuller --first-parent"

git config --global alias.lhd10 "log --numstat -c --decorate --pretty=fuller --first-parent -10"
git config --global alias.lhd20 "log --numstat -c --decorate --pretty=fuller --first-parent -20"
git config --global alias.lhd30 "log --numstat -c --decorate --pretty=fuller --first-parent -30"

#-------------------------------------------------------------------------------
# List Commit.
# Usage:  git lc <tag-or-commit-id>   : List the commit <tag-or-commit-id>
#         git lc <tag-or-commit-id>~  : List the first  parent of commit <tag-or-commit-id>, same as variants b), c)
#         git lc <tag-or-commit-id>^  : List the first  parent of commit <tag-or-commit-id>, same as variants a), c)
#         git lc <tag-or-commit-id>^1 : List the first  parent of commit <tag-or-commit-id>, same as variants a), b)
#         git lc <tag-or-commit-id>^2 : List the second parent of commit <tag-or-commit-id>
#
#         git lc --name-only <tag-or-commit-id> : List changed files by commit <tag-or-commit-id>, without add/delete statistics
#-------------------------------------------------------------------------------
git config --global alias.lc "log --numstat -1 -c --decorate --pretty=fuller"

#-------------------------------------------------------------------------------
# List changes in HEAD.
# Usage:  git lch
#-------------------------------------------------------------------------------
git config --global alias.lch "log --numstat -1 -c --decorate --pretty=fuller HEAD"

#-------------------------------------------------------------------------------
# List Commit with Patch format.
# Usage:  git lcp <tag-or-commit-id>
#-------------------------------------------------------------------------------
git config --global alias.lcp "log --no-prefix -1 -p --decorate --pretty=fuller"

#-------------------------------------------------------------------------------
# List Files changed in specific commit
# Usage:  git lf <tag-or-commit-id>
#-------------------------------------------------------------------------------
git config --global alias.lf "diff-tree --no-commit-id --name-only -r"

#-------------------------------------------------------------------------------
# Execute shell script ~/scripts/git-ls.sh to list changes in specific commit.
# Usage:  git sls [-h]
#         git sls [-p <previous-commit>] [-c <current-commit>] [-e | -n]
#         git sls [-c <current-commit>] [-s | -l]
#
#         git slse
#         git slsec [<current-commit>]
#-------------------------------------------------------------------------------
git config --global alias.sls   '!~/scripts/git-ls.sh'

git config --global alias.slse  '!~/scripts/git-ls.sh -e'
git config --global alias.slsec '!~/scripts/git-ls.sh -e -c'

#-------------------------------------------------------------------------------
# Show file content on specific commit.
# Usage:  git cf <tag-or-commit-id>:/path/to/file              : Show content of /path/to/file on tag or commit <tag-or-commit-id> on screen
#         git cf <tag-or-commit-id>:/path/to/file | less -N    : Show content of /path/to/file on tag or commit <tag-or-commit-id> on editor less
#-------------------------------------------------------------------------------
git config --global alias.cf "cat-file -p"

#-------------------------------------------------------------------------------
# Execute shell script ~/scripts/git-archive.sh to archive specific commit.
# Usage:  git sar { [-c commit-id] [-p path ] [-o output-dir] [-m] | [-h] }
#-------------------------------------------------------------------------------
git config --global alias.sar '!~/scripts/git-archive.sh'

#-------------------------------------------------------------------------------
# show differences, see below configurations.
# Usage:  git d [branch-or-tag-or-commit-id1 [branch-or-tag-or-commit-id2]]
#-------------------------------------------------------------------------------
git config --global alias.d diff

#-------------------------------------------------------------------------------
# Show differences between HEAD~ and specified commit.
# Usage:  git dh [branch-or-tag-or-commit-id]
#-------------------------------------------------------------------------------
git config --global alias.dh "diff HEAD~"

#-------------------------------------------------------------------------------
# Use graphical tool to show differences, see below configurations.
# Usage:  git dt [branch-or-tag-or-commit-id1 [branch-or-tag-or-commit-id2]]
#-------------------------------------------------------------------------------
git config --global alias.dt difftool

#-------------------------------------------------------------------------------
# Use graphical tool to show differences bewteen HEAD~ and specified commit.
# Usage:  git dth [branch-or-tag-or-commit-id]
#-------------------------------------------------------------------------------
git config --global alias.dth "difftool HEAD~"

#-------------------------------------------------------------------------------
# Execute shell script ~/scripts/git-dt.sh to show changes between commits.
# Usage:  git sdt [-h]
#         git sdt [-p <previous-commit>] [-c <current-commit>] [-f <file>] [-d] [-t]
#
#         git sdtc <current-commit>
#-------------------------------------------------------------------------------
git config --global alias.sdt '!~/scripts/git-dt.sh'

git config --global alias.sdtc '!~/scripts/git-dt.sh -c'

#-------------------------------------------------------------------------------
# Diff Two Commits.
# Usage:  git dtc <tag-or-commit-id-1> <tag-or-commit-id-2>
#-------------------------------------------------------------------------------
git config --global alias.dtc "diff --no-prefix"

#-------------------------------------------------------------------------------
# Diff Two Commits with Statistics.
# Usage:  git dtcs <tag-or-commit-id-1> <tag-or-commit-id-2>
#-------------------------------------------------------------------------------
git config --global alias.dtcs "diff --no-prefix --shortstat"

#-------------------------------------------------------------------------------
# Diff Two Commits with Statistics, include File changes.
# Usage:  git dtcsf <tag-or-commit-id-1> <tag-or-commit-id-2>
#-------------------------------------------------------------------------------
git config --global alias.dtcsf "diff --no-prefix --stat"

#-------------------------------------------------------------------------------
# List Tags sorted with "v:refname".
# Usage:  git lts
#-------------------------------------------------------------------------------
git config --global alias.lts 'tag --sort="v:refname"'

#-------------------------------------------------------------------------------
# List Tag.
# Usage:  git lt <tag-or-commit-id>
#-------------------------------------------------------------------------------
git config --global alias.lt 'tag --points-at'

#-------------------------------------------------------------------------------
# List closest Tagname on first parent.
# Usage:  git llt
#-------------------------------------------------------------------------------
git config --global alias.llt 'describe --abbrev=0 --tags --first-parent HEAD'

#-------------------------------------------------------------------------------
# List Branch which contains specific Tag or commit.
# Usage:  git lbt <tag-or-commit-id>
#-------------------------------------------------------------------------------
git config --global alias.lbt 'branch -a --contains'

#-------------------------------------------------------------------------------
# List Merge Bases for the specified commits, tags, or branches.
# Usage:  git lmb {<branch-1> | <tag-1> | <commit-1>} {<branch-2> | <tag-2> | <commit-2>}
#-------------------------------------------------------------------------------
git config --global alias.lmb 'show-branch --merge-base'

#-------------------------------------------------------------------------------
# Grep commit Log.
# Usage:  git gl <keyword> [-- <files>]
# Note: It cannot grep the content of each patch.
#-------------------------------------------------------------------------------
git config --global alias.gl "log --all --stat --grep"

#-------------------------------------------------------------------------------
# Print Lines matching a pattern.
# Usage:  git g <keyword> [-- <files>]
#-------------------------------------------------------------------------------
git config --global alias.g "grep --full-name -n --heading --break -p"

#-------------------------------------------------------------------------------
# Print Lines matching a pattern (Ignore case).
# Usage:  git gi <keyword> [-- <files>]
#-------------------------------------------------------------------------------
git config --global alias.gi "grep --full-name -n --heading --break -p -i"

#-------------------------------------------------------------------------------
# Count commits
# Usage:  git cnt <tag-or-commit-id>
#         git cnt <tag-or-commit-id1>..<tag-or-commit-id2>
#-------------------------------------------------------------------------------
git config --global alias.cnt "rev-list --count"

#-------------------------------------------------------------------------------
# List Untracked ALL directories and files from working tree.
# Usage:  git lua
#-------------------------------------------------------------------------------
#git config --global alias.lua "clean -d -n"

#-------------------------------------------------------------------------------
# Remove ALL untracked directories and files from working tree.
# Usage:  git cln
#-------------------------------------------------------------------------------
git config --global alias.cln "clean -d -f -X"

#-------------------------------------------------------------------------------
# Optimize repository
# Usage:  git opr
#-------------------------------------------------------------------------------
git config --global alias.opr "gc --prune=now --aggressive"

#-------------------------------------------------------------------------------
# List References in a local repository.
# Usage:  git lr
#-------------------------------------------------------------------------------
git config --global alias.lr "show-ref --head --heads --tags -d"

#-------------------------------------------------------------------------------
# Git pull.
# Usage:  git pl
#-------------------------------------------------------------------------------
git config --global alias.pl pull

#-------------------------------------------------------------------------------
# Git push.
# Usage:  git ps
#-------------------------------------------------------------------------------
git config --global alias.ps push

#-------------------------------------------------------------------------------
# Git push to master.
# Usage:  git psh
#-------------------------------------------------------------------------------
git config --global alias.psh "push origin HEAD:refs/for/master"

#-------------------------------------------------------------------------------
# Git push to drafts.
# Usage:  git psd
#-------------------------------------------------------------------------------
git config --global alias.psd "push origin HEAD:refs/drafts/master"

#-------------------------------------------------------------------------------
# Git Submodule.
# Usage:  git sub
#-------------------------------------------------------------------------------
git config --global alias.sub submodule

#-------------------------------------------------------------------------------
# List Submodule Status.
# Usage:  git subst
#         git subst --recurisve
#-------------------------------------------------------------------------------
git config --global alias.subst "submodule status"

#-------------------------------------------------------------------------------
# List Submodule Status Recursive.
# Usage:  git substr
#-------------------------------------------------------------------------------
git config --global alias.substr "submodule status --recursive"

#-------------------------------------------------------------------------------
# Update submodule with depth one.
# Usage:  git subupd
#-------------------------------------------------------------------------------
git config --global alias.subupd "submodule update --init --depth 1"

#-------------------------------------------------------------------------------
# Update submodule recursively.
# Usage:  git subupdr
#-------------------------------------------------------------------------------
git config --global alias.subupdr "submodule update --init --recursive"

#-------------------------------------------------------------------------------
# Reset all submodules.
# Usage:  git subrst
#-------------------------------------------------------------------------------
git config --global alias.subrst "submodule foreach --recursive git reset --hard"

#-------------------------------------------------------------------------------
# Apply the last stash change.
# Usage:  git stash-unapply
#-------------------------------------------------------------------------------
#git config --global alias.stash-unapply '!git stash show -p | git apply -R'

#-------------------------------------------------------------------------------
# git worktree.
# Usage:  git wt
#-------------------------------------------------------------------------------
git config --global alias.wt worktree

#-------------------------------------------------------------------------------
# git worktree list.
# Usage:  git wtl
#-------------------------------------------------------------------------------
git config --global alias.wtl "worktree list"

#-------------------------------------------------------------------------------
# git worktree add.
# Usage:  git wta
#-------------------------------------------------------------------------------
git config --global alias.wta "worktree add"

#-------------------------------------------------------------------------------
# git worktree remove.
# Usage:  git wtrm
#-------------------------------------------------------------------------------
git config --global alias.wtrm "worktree remove -f"

#-------------------------------------------------------------------------------
# git worktree prune.
# Usage:  git wtp
#-------------------------------------------------------------------------------
git config --global alias.wtp "worktree prune"

#-------------------------------------------------------------------------------
# git worktree move.
# Usage:  git wtmv
#-------------------------------------------------------------------------------
git config --global alias.wtmv "worktree move"

#-------------------------------------------------------------------------------
# git worktree repair.
# Usage:  git wtrp
#-------------------------------------------------------------------------------
git config --global alias.wtrp "worktree repair"

#-------------------------------------------------------------------------------
# git worktree lock.
# Usage:  git wtlk
#-------------------------------------------------------------------------------
git config --global alias.wtlk "worktree lock"

#-------------------------------------------------------------------------------
# git worktree unlock.
# Usage:  git wtul
#-------------------------------------------------------------------------------
git config --global alias.wtul "worktree unlock"


################################################################################
## git difftool & mergetool
################################################################################

# Use Beyond Compare 3 as git difftool and mergetool
#git config --global diff.tool bc3
#git config --global difftool.bc3.trustexitcode true
#git config --global merge.tool bc3
#git config --global mergetool.prompt false
#git config --global mergetool.keepbackup false
#git config --global mergetool.bc3.trustexitcode true

# Use Meld as git difftool and mergetool
git config --global diff.tool meld
git config --global merge.tool meld
git config --global mergetool.prompt false
git config --global mergetool.keepbackup false

